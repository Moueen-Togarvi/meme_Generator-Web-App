<!-- Main Content Section -->
<section id="home" class="w-full h-screen flex items-center justify-center mt-16 bg-gradient-to-r from-indigo-600 to-purple-500 relative overflow-hidden">

  <!-- Content on top of the globe -->
  <div class="text-center relative z-10">
      <h1 class="text-5xl font-bold text-white mb-4 hero-animation">Welcome to MemeGen</h1>
      <p class="text-xl text-gray-200 mb-8">Create hilarious memes in seconds!</p>
      <a href="#meme-generator" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-300">Get Started</a>
  </div>

</section>

<!-- Canvas for Globe Animation -->
<canvas id="globeCanvas" class="absolute inset-0 w-full h-full"></canvas>

<script type="module">
import createGlobe from 'https://cdn.skypack.dev/cobe';

const canvas = document.getElementById('globeCanvas');
let width = canvas.offsetWidth;
let phi = 0;

// Resize handler
const onResize = () => {
  width = canvas.offsetWidth;
};

// Render handler
const onRender = (state) => {
  phi += 0.005;
  state.phi = phi;
  state.width = width * 2;
  state.height = width * 2;
};

// Initialize the globe animation
window.addEventListener('resize', onResize);
onResize();

const globe = createGlobe(canvas, {
  devicePixelRatio: 2,
  width: width,
  height: width,
  phi: 0,
  theta: 0.3,
  dark: 1,
  diffuse: 0.4,
  mapSamples: 16000,
  mapBrightness: 1.2,
  baseColor: [0.3, 0.3, 0.3],
  markerColor: [251 / 255, 100 / 255, 21 / 255],
  glowColor: [1, 1, 1],
  markers: [
    { location: [14.5995, 120.9842], size: 0.03 },
    { location: [19.076, 72.8777], size: 0.03 },
    { location: [23.8103, 90.4125], size: 0.05 },
    { location: [30.0444, 31.2357], size: 0.07 },
    { location: [39.9042, 116.4074], size: 0.08 },
    { location: [-23.5505, -46.6333], size: 0.05 },
    { location: [19.4326, -99.1332], size: 0.04 },
    { location: [40.7128, -74.006], size: 0.1 },
    { location: [34.6937, 135.5022], size: 0.05 },
    { location: [41.0082, 28.9784], size: 0.06 },
  ],
  onRender: onRender,
});

// Clean up event listener when window is unloaded
window.addEventListener('beforeunload', () => {
  window.removeEventListener('resize', onResize);
});
</script>

<style>
/* Adding a simple fade-in animation for the hero text */
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.hero-animation {
  animation: fadeIn 1s ease-out;
}

/* Additional styles for the canvas and the section */
#home {
  position: relative;
  overflow: hidden;
}

#globeCanvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* Optional: Adjust the content's z-index and positioning to make sure it's on top */
.text-center {
  position: relative;
  z-index: 10; /* Ensure the content stays on top */
}
</style>
